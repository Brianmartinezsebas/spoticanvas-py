# Spotify Canvas API (Python Version)

This is a Python reimplementation of the [Spotify-Canvas-API](https://github.com/Paxsenix0/Spotify-Canvas-API) originally created by [Paxsenix0](https://github.com/Paxsenix0). It allows you to fetch the animated canvas videos used by Spotify for specific tracks, using a valid `sp_dc` cookie.

## 📁 Project Structure

```
python_version/
│
├── main.py                     # Flask server entry point
├── canvas_controller.py        # Flask blueprint with canvas route
├── spotify_auth_service.py     # Handles authentication and sp_dc token logic
├── spotify_canvas_service.py   # Logic to fetch Spotify canvas videos
├── requirements.txt            # Python dependencies
├── .env                        # Environment variables (e.g., SP_DC)
├── README.md                   # You're reading it!
└── proto/
    └── _canvas_pb2.py          # Generated by protoc from your .proto file
```

## 🚀 Getting Started

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/spotify-canvas-api-python.git
cd spotify-canvas-api-python
```

### 2. Install Dependencies

Create a virtual environment (optional but recommended):

```bash
python -m venv venv
source venv/bin/activate   # On Windows: venv\Scripts\activate
```

Install the required packages:

```bash
pip install -r requirements.txt
```

### 3. Set Up Environment Variables

Create a `.env` file in the root directory with the following:

```
SP_DC=your_sp_dc_cookie_here
PORT=3000
```

> 🔒 Your `sp_dc` cookie can be extracted from your Spotify web session (used for authentication).

### 4. Run the Server

```bash
python main.py
```

The server should start on:

```
http://localhost:3000
```

## 📡 API Usage

### POST `/canvas`

**Request body:**

```json
{
  "tracks": [
    {
      "track_uri": "spotify:track:YOUR_TRACK_ID"
    }
  ]
}
```

**Response:**

A JSON object containing canvas URLs or an error message.

## 🛠 Requirements

- Python 3.8+
- `protoc` (Protocol Buffers Compiler) if you need to regenerate `_canvas_pb2.py`

To regenerate protobuf:

```bash
protoc --proto_path=proto --python_out=proto proto/_canvas.proto
```

## 📄 License

This project is for educational purposes and follows the same guidelines as the original [Spotify-Canvas-API](https://github.com/Paxsenix0/Spotify-Canvas-API). Be aware of Spotify's [Terms of Service](https://www.spotify.com/legal/end-user-agreement/) when using internal APIs.

---

**Author:** YourNameHere  
Forked from [Paxsenix0](https://github.com/Paxsenix0)
